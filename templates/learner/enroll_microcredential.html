{% extends 'home/tes.html' %}
{% load static %}

{% block content %}
    <div class="container mt-4">
        <h1>Enroll in {{ microcredential.title }}</h1>

        <!-- Deskripsi MicroCredential -->
        <p>{{ microcredential.description|safe }}</p>

        <!-- Informasi Tambahan -->
        <div class="mb-3">
            <p><strong>Category:</strong> {% if microcredential.category %}{{ microcredential.category }}{% else %}N/A{% endif %}</p>
            <p><strong>Status:</strong> {{ microcredential.status|title }}</p>
            <p><strong>Start Date:</strong> {% if microcredential.start_date %}{{ microcredential.start_date|date:"M d, Y" }}{% else %}N/A{% endif %}</p>
            <p><strong>End Date:</strong> {% if microcredential.end_date %}{{ microcredential.end_date|date:"M d, Y" }}{% else %}N/A{% endif %}</p>
            <p><strong>Minimum Total Score:</strong> {{ microcredential.min_total_score|floatformat:2 }}</p>
        </div>

        <!-- Daftar Kursus yang Akan Didaftarkan -->
        <h2>Required Courses</h2>
        <ul class="list-group mb-4">
            {% for course in required_courses %}
                <li class="list-group-item">
                    {{ course.course_name }} (Max Score: {{ course.hour|default:"N/A" }})
                </li>
            {% empty %}
                <li class="list-group-item">No required courses found.</li>
            {% endfor %}
        </ul>

        <!-- Formulir Konfirmasi -->
        <div class="alert alert-info" role="alert">
            <p>By enrolling in this MicroCredential, you will automatically be enrolled in all required courses listed above.</p>
            <form method="post" action="{% url 'courses:enroll_microcredential' slug=microcredential.slug %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary">Confirm Enrollment</button>
                <a href="{% url 'courses:microcredential_detail' slug=microcredential.slug %}" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
    </div>
{% endblock %}