{% extends 'home/base.html' %}
{% load static %}
{% block title %}Our Partners{% endblock %}
{% block meta %}
  <meta name="description" content="Meet our official partners who collaborate with LMSKu to bring quality learning experiences.">
  <meta name="keywords" content="partners, institutions, collaborators, LMSKu, education partners">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ request.build_absolute_uri }}">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Our Partners - LMSKu">
  <meta property="og:description" content="Meet our official partners who collaborate with LMSKu to bring quality learning experiences.">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  <meta property="og:image" content="{% static 'assets/img/partner-og.jpg' %}">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Our Partners - LMSKu">
  <meta name="twitter:description" content="Meet our official partners who collaborate with LMSKu to bring quality learning experiences.">
  <meta name="twitter:image" content="{% static 'assets/img/partner-og.jpg' %}">
  <title>LMSKu - Our Partners</title>
{% endblock %}
{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Our Partners</h2>

  <!-- Partner Grid -->
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 sm:gap-6">
    {% for partner in partners %}
      <a href="{% url 'courses:org_partner' partner.name.slug %}"
         class="block bg-white rounded-xl p-4 border border-gray-200 hover:bg-gray-50 transition group">
        {% if partner.logo %}
          <img 
            src="{{ partner.logo.url }}" 
            alt="{{ partner.name }}" 
            class="max-h-24 w-full object-contain mx-auto mb-3" 
            loading="lazy">
        {% else %}
          <div class="max-h-24 w-full flex items-center justify-center bg-gray-100 rounded mb-3">
            <span class="text-gray-500 text-sm">No logo</span>
          </div>
        {% endif %}
        <h3 class="text-center text-sm font-semibold text-gray-900 line-clamp-2">
          {{ partner.name|default:"Unnamed Partner" }}
        </h3>
      </a>
    {% empty %}
      <div class="col-span-full text-center py-6">
        <p class="text-gray-500">No partners available.</p>
      </div>
    {% endfor %}
  </div>

  <!-- Pagination -->
  {% if partners.paginator.num_pages > 1 %}
    <nav class="mt-6 flex justify-center gap-2" aria-label="Pagination">
      {% if partners.has_previous %}
        <a href="{% url 'partner:partner_list' %}?page={{ partners.previous_page_number }}"
           class="px-3 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">« Prev</a>
      {% else %}
        <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded">« Prev</span>
      {% endif %}

      {% for num in partners.paginator.page_range %}
        {% if num|add:'-2' <= partners.number and num|add:'2' >= partners.number %}
          {% if num == partners.number %}
            <span class="px-3 py-2 bg-red-600 text-white rounded font-semibold">{{ num }}</span>
          {% else %}
            <a href="{% url 'partner:partner_list' %}?page={{ num }}"
               class="px-3 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">{{ num }}</a>
          {% endif %}
        {% endif %}
      {% endfor %}

      {% if partners.has_next %}
        <a href="{% url 'partner:partner_list' %}?page={{ partners.next_page_number }}"
           class="px-3 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">Next »</a>
      {% else %}
        <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded">Next »</span>
      {% endif %}
    </nav>
  {% endif %}
</div>
{% endblock %}
