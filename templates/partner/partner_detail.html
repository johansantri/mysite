{% extends 'home/tes.html' %}
{% load humanize %}
{% load static %}
{% block content %}

<!-- Logo Section -->
<div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
    <div class="d-flex align-items-center mb-4 mb-md-0 order-1 order-md-0">
        {% if partner.logo %}
            <img src="{{ partner.logo.url }}" alt="{{ partner.slug }}" class="img-fluid" width="100" height="100"/>
        {% else %}
            <img src="https://via.placeholder.com/100" alt="No Logo Available" class="img-fluid" width="100" height="100"/>
        {% endif %}
        <div class="ms-4">
            <h1 class="h3 fw-bold">{{ partner.name }}</h1>
            <p>Join: {{ partner.created_ad|date:"F j, Y" }}</p>
            <p class="text-dark">{{ partner.description | safe }}</p>
            <p class="text-dark">
                {{ partner.address | safe }} | {{ partner.phone | safe }} | {{ partner.email | safe }} | {{ partner.user.email | safe }}
            </p>
        </div>
    </div>
</div>



<!-- Stats Tabs Section -->
<ul class="nav nav-tabs mt-4" id="statsTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="learners-tab" data-bs-toggle="tab" data-bs-target="#learners" type="button" role="tab" aria-controls="learners" aria-selected="true">
            Learners
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab" aria-controls="reviews" aria-selected="false">
            Reviews
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="courses-tab" data-bs-toggle="tab" data-bs-target="#courses" type="button" role="tab" aria-controls="courses" aria-selected="false">
            Courses
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="instructors-tab" data-bs-toggle="tab" data-bs-target="#instructors" type="button" role="tab" aria-controls="instructors" aria-selected="false">
            Instructors
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="payments-tab" data-bs-toggle="tab" data-bs-target="#payments" type="button" role="tab" aria-controls="payments" aria-selected="false">
            Payments
        </button>
    </li>
</ul>

<div class="tab-content p-4 border border-top-0" id="statsTabContent">

    <!-- Learners Tab -->
    <div class="tab-pane fade show active" id="learners" role="tabpanel" aria-labelledby="learners-tab">
        <div class="text-center mb-3">
            <p class="text-muted mb-1">Total Unique Learners</p>
            <p class="h4 fw-bold">{{ unique_learners }}</p>
        </div>
        <hr>
        <div class="row text-center mb-4">
            <div class="col">
                <h6 class="text-muted">Inbound</h6>
                <p class="fw-bold">{{ inbound_count }}</p>
            </div>
            <div class="col">
                <h6 class="text-muted">Outbound</h6>
                <p class="fw-bold">{{ outbound_count }}</p>
            </div>
            <div class="col">
                <h6 class="text-muted">Internal</h6>
                <p class="fw-bold">{{ internal_count }}</p>
            </div>
        </div>
    </div>

    <!-- Reviews Tab -->
    <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
        <div class="text-center mb-3">
            <p class="text-muted mb-1">Total Reviews</p>
            <p class="h4 fw-bold">{{ total_reviews }} <small class="text-muted">{{ average_rating }}/5</small></p>
        </div>
    </div>

    <!-- Courses Tab -->
    <div class="tab-pane fade" id="courses" role="tabpanel" aria-labelledby="courses-tab">
        <div class="text-center mb-4">
            <p class="text-muted mb-1">Total Courses</p>
            <p class="h4 fw-bold">{{ total_courses }}</p>
        </div>
    </div>

    <!-- Instructors Tab -->
    <div class="tab-pane fade" id="instructors" role="tabpanel" aria-labelledby="instructors-tab">
        <div class="text-center mb-4">
            <p class="text-muted mb-1">Total Instructors</p>
            <p class="h4 fw-bold">{{ total_instructors }}</p>
        </div>
    </div>

    <!-- Payments Tab -->
    <div class="tab-pane fade" id="payments" role="tabpanel" aria-labelledby="payments-tab">
        <div class="text-center mb-3">
            <p class="text-muted mb-1">Total Payments</p>
            <p class="h4 fw-bold">{{ total_payments }}</p>
            <p class="text-success fw-bold">Total Partner Earnings: IDR{{ total_payment_amount|intcomma }}</p>
        </div>
    </div>

</div>

<!-- Social Links -->
<div class="d-flex mt-3 justify-content-center gap-3">
    <a href="#" class="text-danger"><i class="fab fa-facebook-f"></i></a>
    <a href="#" class="text-danger"><i class="fab fa-twitter"></i></a>
    <a href="#" class="text-danger"><i class="fab fa-linkedin-in"></i></a>
    <a href="#" class="text-danger"><i class="fab fa-instagram"></i></a>
</div>

{% endblock %}